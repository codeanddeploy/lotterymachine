!function(e){var a,t,r,n,o,s=function(){},c=!0,d=!1;var l={init:function(i){var l=0,h=function(){++l<10||g()},g=function(){s()},u=new Image;u.onload=h,u.src="images/1.png";var m=new Image;m.onload=h,m.src="images/2.png";var p=new Image;p.onload=h,p.src="images/3.png";var b=new Image;b.onload=h,b.src="images/4.png";var y=new Image;y.onload=h,y.src="images/5.png";var k=new Image;k.onload=h,k.src="images/6.png";var v=new Image;v.onload=h,v.src="images/7.png";var w=new Image;w.onload=h,w.src="images/8.png";var x=new Image;x.onload=h,x.src="images/9.png";var f=new Image;f.onload=h,f.src="images/0.png";var I=new Image;function P(e,a,t,i,r,n){return{number:e,x:a,lastX:a,y:t,lastY:t,dx:i,dy:r,r:n,normX:0,normY:0,picked:0,drawn:!1,hit:!0}}I.onload=h,I.src="images/tube.png",n=i.callback,a=i.containerRadius||150,t=i.waitInterval||1e3,o=i.playSound,e(this).append('<canvas id="myCanvas" style="background-image:url(\'images/ballMachineBackground.jpg\'); background-position: center; background-size: contain;"></canvas>'),e(this).append("</br>"),e(this).append('<canvas id="myCanvas2" style="background: #eee"></canvas>'),e(this).append('<audio loop id="backgroundAudio"><source src="backgroundAudio.wav" type="audio/ogg"/></audio>');var M=!1,T=document.getElementById("myCanvas"),A=T.getContext("2d");T.width=2*a,T.height=2*a,T.style["border-radius"]=a+"px";var C=document.getElementById("myCanvas2"),S=C.getContext("2d");C.width=4*(a/5*2+10),C.height=a/5*2+5;var B=-3.5;r=[P(0,T.width/2,T.height-30,B,5,a/5),P(1,T.width/3,T.height-50,B,5,a/5),P(2,T.width/4,T.height-60,B,5,a/5),P(3,T.width/2,T.height/5,B,5,a/5),P(4,T.width/3,T.height-55,B,5,a/5),P(5,T.width/2,T.height-47,B,5,a/5),P(6,T.width/2,T.height/10,B,5,a/5),P(7,T.width/2,T.height-40,B,5,a/5),P(8,T.width/2,T.height-45,B,5,a/5),P(9,T.width/2,T.height-35,B,5,a/5)];var j=0,O=180;function X(e,a,t,i,r){var n=t*(Math.PI/180),o=Math.cos(n),s=Math.sin(n),c=o*i+e,d=s*i+a,l=o*r+c,h=s*r+d;A.beginPath(),A.moveTo(c,d),A.lineTo(l,h),A.lineWidth=5,A.stroke(),A.closePath()}s=function(){A.globalAlpha=1,A.clearRect(0,0,T.width,T.height),A.beginPath(),A.arc(T.width/2,T.height/2,5,0,2*Math.PI,!0),A.lineWidth=1,A.strokeStyle="#5e3434",A.stroke(),A.closePath(),c||(j+=5,O+=5),X(T.width/2,T.height/2,j,5,a),X(T.width/2,T.height/2,O,5,a);for(var e=0;e<r.length;e++){var i,n=r[e];switch(d&&(S.clearRect(0,0,C.width,C.height),d=!1),A.beginPath(),A.arc(n.x,n.y,n.r,0,2*Math.PI),A.closePath(),A.fillStyle="rgba(255, 255, 255, 1)",A.fill(),A.globalCompositeOperation="source-atop",n.number){case 1:i=u;break;case 2:i=m;break;case 3:i=p;break;case 4:i=b;break;case 5:i=y;break;case 6:i=k;break;case 7:i=v;break;case 8:i=w;break;case 9:i=x;break;case 0:i=f;break;default:i=u}var o=a/20,l=n.x-n.r-o,h=n.y-n.r-o,g=2*n.r+2*o,P=2*n.r+2*o;if(A.drawImage(i,l,h,g,P),A.globalCompositeOperation="source-over",A.font="18px arial",A.textAlign="center",A.textBaseline="middle",A.fillStyle="black",A.fillText(n.number,n.x,n.y),!c)if(n.picked){n.lastX=n.x,n.lastY=n.y,n.x+=n.dx,n.y+=n.dy;var B=a,Y=2*a-n.r;if(n.x-B>-5&&n.x-B<5&&(n.x=B),n.y-Y>-5&&n.y-Y<5&&(n.y=Y),n.x<B?n.dx=5:n.x>B?n.dx=-5:n.dx=0,n.y<Y?n.dy=5:n.y>Y?n.dy=-5:n.dy=0,n.x==B&&n.y==Y){var R=n.number;M||(M=!0,setTimeout(function(){var e,t=5+r[R].r+(r[R].picked-1)*(2*r[R].r+10),i=C.height/2;switch(S.beginPath(),S.arc(t,i,r[R].r,0,2*Math.PI),S.closePath(),S.fillStyle="rgba(255, 255, 255, 1)",S.fill(),S.globalCompositeOperation="source-atop",r[R].number){case 1:e=u;break;case 2:e=m;break;case 3:e=p;break;case 4:e=b;break;case 5:e=y;break;case 6:e=k;break;case 7:e=v;break;case 8:e=w;break;case 9:e=x;break;case 0:e=f;break;default:e=u}var n=a/20,o=t-r[R].r-n,s=i-r[R].r-n,c=2*r[R].r+2*n,d=2*r[R].r+2*n;S.drawImage(e,o,s,c,d),S.globalCompositeOperation="source-over",S.font="18px arial",S.textAlign="center",S.textBaseline="middle",S.fillStyle="black",S.fillText(r[R].number,t,i),r[R].drawn=!0,r[R].picked=0,r[R].x=T.width/2,r[R].y=T.height-47,r[R].dx=-3.5,r[R].dy=5,M=!1},t))}}else{n.lastX=n.x,n.lastY=n.y,n.x+=n.dx,n.y+=n.dy;var q=n.x-a,E=n.y-a,Q=Math.sqrt(q*q+E*E);if(Q>=a-n.r){var W=q/Q,z=E/Q,F=-z,D=W,G=-(W*n.dx+z*n.dy),H=F*n.dx+D*n.dy;n.dx=G*W+H*F,n.dy=G*z+H*D}}}A.globalAlpha=.5,A.drawImage(I,115,210,a/5*2+10,a/5*3),requestAnimationFrame(s)}},run:function(a){for(i=0;i<9;i++)r[i].picked=0;d=!0,c=!1,o&&e("#backgroundAudio")[0].play();var s=a.toString().split("");setTimeout(function(){setTimeout(function(){r[s[0]].picked=1},t),setTimeout(function(){r[s[1]].picked=2},4*t),setTimeout(function(){r[s[2]].picked=3},6*t),setTimeout(function(){r[s[3]].picked=4,setTimeout(function(){c=!0,o&&e("#backgroundAudio")[0].pause(),n.call(this,a)},2*t)},8*t)},0)}};e.fn.lotteryMachine=function(a){return l[a]?l[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.lotteryMachine"):l.init.apply(this,arguments)}}(jQuery);